<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping
    PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">

<hibernate-mapping>

  <class 
      name="org.sakaiproject.component.app.messageforums.dao.hibernate.MessageForumsUserImpl" 
      table="MFR_MESSAGE_FORUMS_USER_T" 
      optimistic-lock="version">

    <id name="id">
      <column name="ID" not-null="true" length="19" />
      <generator class="native">
        <param name="sequence">MFR_MESSAGE_FORUMS_USER_S</param>
      </generator>
    </id>

	<!--  Version number used for optimistic locking -->
    <version name="version" column="VERSION" />

    <!-- MessageForumsUser fields -->
    <property name="uuid">
      <column name="UUID" length="36" not-null="true" />
    </property>
    
    <property name="userId">
      <column name="USER_ID" length="255" not-null="true" />
    </property>
    
    <many-to-one name="apAccessors" column="apaSurrogateKey"
      class="org.sakaiproject.component.app.messageforums.dao.hibernate.ActorPermissionsImpl"
      not-null="false" index="MFR_USER_PARENT_I1" cascade="none" />                
    <property name="apaccessorsindex" column="ap1_index_col" type="int" update="true" insert="true"/>

    <many-to-one name="apModerators" column="apmSurrogateKey"
      class="org.sakaiproject.component.app.messageforums.dao.hibernate.ActorPermissionsImpl"
      not-null="false" index="MFR_USER_PARENT_I2" cascade="none" />                
    <property name="apmoderatorsindex" column="ap2_index_col" type="int" update="true" insert="true"/>

    <many-to-one name="apContributors" column="apcSurrogateKey"
      class="org.sakaiproject.component.app.messageforums.dao.hibernate.ActorPermissionsImpl"
      not-null="false" index="MFR_USER_PARENT_I3" cascade="none" />                
    <property name="apcontributorsindex" column="ap3_index_col" type="int" update="true" insert="true"/>        

  </class>
  
  <query name="findUserByUserId">
    <![CDATA[from org.sakaiproject.component.app.messageforums.dao.hibernate.MessageForumsUserImpl user where user.userid = :userId]]>
  </query>
  
</hibernate-mapping>
